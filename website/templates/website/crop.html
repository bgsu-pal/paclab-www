{% extends 'website/layout.html' %}
{% block title %}Image Crop{% endblock %}
{% block body %}
{% load staticfiles %}
{% load static %}
<script src="{% static 'website/jquery.Jcrop.js' %}"></script>
<script type="text/javascript">

//JQuery front-end cropping plugin by tapmodo

jQuery(function($){

var jcrop_api;

$('#target').Jcrop({
  onChange:   showCoords,
  onSelect:   showCoords,
  onRelease:  clearCoords,
},function(){
  jcrop_api = this;
});

$('#coords').on('change','input',function(e){
  var x1 = $('#x1').val(),
      x2 = $('#x2').val(),
      y1 = $('#y1').val(),
      y2 = $('#y2').val();
  jcrop_api.setSelect([x1,y1,x2,y2]);
});

});

// Simple event handler, called from onChange and onSelect
// event handlers, as per the Jcrop invocation above
function showCoords(c)
{
$('#x1').val(c.x);
$('#y1').val(c.y);
$('#x2').val(c.x2);
$('#y2').val(c.y2);
$('#w').val(c.w);
$('#h').val(c.h);
};

function clearCoords()
{
$('#coords input').val('');
};



</script>
<link rel="stylesheet" href="{% static 'website/jquery.Jcrop.css' %}" type="text/css" />
<div class="container-fluid">
    <div class="panel panel-default">
        <div class="panel-body">
            <!-- This is the image we're attaching Jcrop to -->
            <img src="{{ profile.photo.url }}" id="target" alt="[Jcrop Example]" class="img-responsive"/>

            <!-- This is the form that our event handler fills -->
            <form id="coords" class="form form-default" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="inline-labels">
                    <label>X <input type="text" name="x" placeholder="0.0" step="any" required id="x1"/></label>
                    <label>Y <input type="text" name="y" placeholder="0.0" step="any" required id="y1"/></label>
                    <label>W <input type="text" name="width" placeholder="0.0" step="any" required id="w"/></label>
                    <label>H <input type="text" name="height" placeholder="0.0" step="any" required id="h"/></label>
                </div>
                <button class="btn btn-default" type="submit">Submit</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
